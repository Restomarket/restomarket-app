# Application
NODE_ENV=development
APP_NAME=restomarket-api
APP_PORT=3002
APP_HOST=0.0.0.0
API_PREFIX=api
API_VERSION=1
REQUEST_TIMEOUT=30000

# =============================================================================
# Database Configuration - Supabase
# =============================================================================
# Pooler connection (port 6543) - for application runtime
DATABASE_URL=postgresql://postgres.PROJECT_REF:PASSWORD@aws-0-eu-central-1.pooler.supabase.com:6543/postgres?sslmode=require

# Direct connection (port 5432) - for migrations only
DATABASE_DIRECT_URL=postgresql://postgres.PROJECT_REF:PASSWORD@aws-0-eu-central-1.pooler.supabase.com:5432/postgres?sslmode=require

# Connection pool settings
DATABASE_POOL_MAX=10
DATABASE_IDLE_TIMEOUT=20
DATABASE_CONNECT_TIMEOUT=10
DATABASE_SSL=true  # Required for Supabase
# DATABASE_SSL_CA=  # Optional: SSL certificate path

# Supabase project info (optional, for debugging and Realtime)
SUPABASE_PROJECT_REF=abcdefghijklmnop
SUPABASE_URL=https://PROJECT_REF.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# =============================================================================
# Better Auth Configuration
# =============================================================================
# REQUIRED: Secret for encrypting cookies and tokens
# Generate with: openssl rand -base64 32
# IMPORTANT: Must match the secret in Next.js and root .env
BETTER_AUTH_SECRET=your_32_char_minimum_secret_here_generate_with_openssl

# Base URL for authentication callbacks
# Should point to Next.js app (not API)
# Development:
BETTER_AUTH_URL=http://localhost:3000
# Staging:
# BETTER_AUTH_URL=http://157.245.21.33
# Production:
# BETTER_AUTH_URL=https://app.restomarket.com

# =============================================================================
# Application URLs (for CORS and auth validation)
# =============================================================================
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:3002/v1

# Logging
LOG_LEVEL=info
LOG_PRETTY=true

# Security
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# Swagger
SWAGGER_ENABLED=true
SWAGGER_TITLE=NestJS Clean API
SWAGGER_DESCRIPTION=Production-ready API with Clean Architecture
SWAGGER_VERSION=1.0

# =============================================================================
# Redis Configuration
# =============================================================================
# Redis connection URL for BullMQ and caching
# Local development:
REDIS_URL=redis://localhost:6379
# Docker:
# REDIS_URL=redis://:redis@redis:6379
# Production with password:
# REDIS_URL=redis://:your_password@your-redis-host:6379

# =============================================================================
# ERP Sync Configuration
# =============================================================================
# Agent authentication secret (shared with ERP agents)
# Generate with: openssl rand -base64 32
# REQUIRED in production, optional in development
AGENT_SECRET=your_agent_secret_minimum_16_chars_generate_with_openssl

# API key for admin endpoints (internal use only)
# Generate with: openssl rand -base64 48
# REQUIRED in production, optional in development
API_SECRET=your_api_secret_minimum_32_chars_generate_with_openssl_rand_base64_48

# Slack webhook for sync alerts (optional)
# Get from: https://api.slack.com/messaging/webhooks
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# BullMQ job concurrency (1-20, default: 5)
BULLMQ_CONCURRENCY=5
